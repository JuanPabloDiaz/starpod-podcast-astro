---
import { ViewTransitions } from 'astro:transitions';
import Player from '@components/Player';
import { getShowInfo } from '@lib/rss';

const show = await getShowInfo();
delete show.items;

console.log(show);

export interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <meta
      name="description"
      content="This site is a demo of an Astro SPA using Astro 3 with the experimental support for the View Transitions API and persistent islands."
    />

    <title>{title}</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap"
      rel="stylesheet"
    />

    <ViewTransitions />
  </head>
  <body class="font-inter antialiased bg-background text-text-body">
    <header
      class="bg-card lg:fixed lg:inset-y-0 lg:left-0 lg:flex lg:w-112 lg:items-start lg:overflow-y-auto xl:w-120"
    >
      <div
        class="relative z-10 mx-auto px-4 pb-4 pt-10 sm:px-6 md:max-w-2xl md:px-4 lg:min-h-full lg:flex-auto lg:border-x lg:px-8 lg:py-12 lg:border-slate-200 xl:px-12"
      >
        <a
          href="/"
          class="relative mx-auto block w-48 overflow-hidden rounded-lg sm:w-64 sm:rounded-xl lg:w-auto lg:rounded-2xl"
          aria-label="Homepage"
        >
          <img class="w-full" src={show.image} alt="" />
        </a>
        {show.title}
      </div>
    </header>
    <main
      class="bg-card lg:relative lg:mb-28 lg:ml-112 lg:border-t-0 xl:ml-120"
    >
      <slot />

      <div id="audio-player">
        <Player client:load transition:persist="player" />
      </div>
    </main>
  </body>
</html>
